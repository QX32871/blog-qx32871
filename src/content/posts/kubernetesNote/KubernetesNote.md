---
title: Kubernetes笔记
published: 2024-10-20
description: 'K8S笔记'
image: './imageForK8SNote.png'
tags: ["Kubernetes"]
category: '笔记'
draft: false 
lang: 'zh_CN'
---
### 基本概念
Kubernetes（K8S）是一个开源的容器编排平台，主要作用是管理和维护容器。

### K8S的基本组件
**Node**  
节点，一个节点可以是一台虚拟机或者一台物理机，一个集群由若干个结点组成，节点上的组件包括kubelet，容器运行时，kubectl以及kube-proxy等组成。

**Pod**  
Pod是K8S的最小调度单位，可以看成是容器的抽象，一个Pod是一个或者多个应用容器的组合，Pod可以看成一个容器运行时环境，在此环境中容器可以相互共享一些资源，如网络，存储以及运行时配置等。

在一般情况下，为了更好地解耦和扩展，一个Pod只运行一个容器，但如果一些容器间存在高度耦合的情况下，比如需要共享配置文件或者对其中的容器进行日志监控等情况，一个Pod中可以运行多个容器，这些与主要容器进行资源共享的容器被称为边车容器(Sidecar)。

Pod之间的通信通过集群内部的特定IP地址进行通信，每个Pod在被创建的时候都会被自动分配一个IP地址，这个IP地址只能被集群内部使用，外部应用无法访问此IP地址。

Pod并不是一个稳定的实体，它有可能会被频繁地销毁和创建，比如当Pod发生了故障的时候，K8S就会把Pod销毁然后重新创建一个，每当Pod被销毁后重新创建的时候集群内部的IP地址都会被重新分配，也就是说每个Pod的集群内部IP并不是固定的。

**Service**  
为了解决Pod有可能会被销毁和重新创建带来的IP地址变动的问题，引入了一个叫做Service的资源对象，Service可以把一组Pod封装成一组服务（Service）这个服务可以通过一个统一且固定的IP地址来访问。
如下图所示，分别把一个应用程序Pod和三个数据库Pod分别封装成两个Service，应用程序通过数据库Service的IP地址访问数据库，当数据库Service中的Pod发生故障重新创建时，该Pod的IP地址变动并不会对应用程序的使用产生影响，Service会自动地将请求转发到其他正常运行的Pod上。
<img src="https://p.sda1.dev/19/e3abe44c3b2f530038398ad7809963ce/k8sImage1.png" >
**内部服务和外部服务**
在K8S中，可以将服务分成内部服务和外部服务，内部服务即不需要暴露给外部和不能暴露给外部的服务，如数据库，缓存，消息队列等，这些服务只需要在集群内部被访问就足够了。外部服务就是需要暴露给用户使用的服务，比如后端的API接口，前端界面等。  



_持续补全中。。。。。。_